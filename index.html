<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Matrix AI MiniApp</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; background: #111; color: #eee; }
  h1, h2 { color: #f0a500; }
  .hidden { display: none; }
  button { background: #f0a500; border: none; padding: 10px 20px; margin: 10px 0; cursor: pointer; color: #111; font-weight: bold; border-radius: 4px; }
  button.backBtn { background: #555; color: #eee; }
  input[type="text"] { padding: 8px; width: 100%; max-width: 250px; margin: 5px 0 15px; border-radius: 4px; border: none; }
  #output { white-space: pre-wrap; margin-top: 10px; }
</style>
</head>
<body>

<div id="mainMenu">
  <h1>Matrix AI MiniApp</h1>
  <button id="btnAnalyze">üîç –ê–Ω–∞–ª–∏–∑ –ª–∏—á–Ω–æ—Å—Ç–∏</button><br/>
  <button id="btnForecasts">üìÖ –ü—Ä–æ–≥–Ω–æ–∑—ã</button><br/>
  <button id="btnCardOfDay">üß© –ö–∞—Ä—Ç–∞ –¥–Ω—è</button><br/>
  <div>–í–µ—Ä—Å–∏—è: 1.0</div>
</div>

<!-- –ê–Ω–∞–ª–∏–∑ –ª–∏—á–Ω–æ—Å—Ç–∏ -->
<div id="analyzeSection" class="hidden">
  <h2>üîç –ê–Ω–∞–ª–∏–∑ –ª–∏—á–Ω–æ—Å—Ç–∏</h2>
  <label for="birthdateInput">–í–≤–µ–¥–∏—Ç–µ –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è (–î–î.–ú–ú.–ì–ì–ì–ì):</label><br/>
  <input type="text" id="birthdateInput" placeholder="01.01.2000" />
  <br/>
  <button id="startAnalyze">–ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–Ω–∞–ª–∏–∑</button>
  <button id="backFromAnalyze" class="backBtn">–ù–∞–∑–∞–¥</button>
  <div id="output"></div>
</div>

<!-- –ü—Ä–æ–≥–Ω–æ–∑—ã -->
<div id="forecastsSection" class="hidden">
  <h2>üìÖ –ü—Ä–æ–≥–Ω–æ–∑—ã</h2>
  <label for="forecastBirthdate">–í–≤–µ–¥–∏—Ç–µ –¥–∞—Ç—É —Ä–æ–∂–¥–µ–Ω–∏—è (–î–î.–ú–ú.–ì–ì–ì–ì):</label><br/>
  <input type="text" id="forecastBirthdate" placeholder="01.01.2000" />
  <br/>
  <button id="startForecasts">–ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–æ–≥–Ω–æ–∑</button>
  <button id="backFromForecasts" class="backBtn">–ù–∞–∑–∞–¥</button>
  <div id="forecastOutput"></div>
</div>

<!-- –ö–∞—Ä—Ç–∞ –¥–Ω—è -->
<div id="cardOfDaySection" class="hidden">
  <h2>üß© –ö–∞—Ä—Ç–∞ –¥–Ω—è</h2>
  <button id="showCardOfDay">–ü–æ–∫–∞–∑–∞—Ç—å –∫–∞—Ä—Ç—É –¥–Ω—è</button>
  <button id="backFromCardOfDay" class="backBtn">–ù–∞–∑–∞–¥</button>
  <div id="cardOfDayOutput"></div>
</div>

<script>
  // –§—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Å–µ–∫—Ü–∏–π
  function showSection(id) {
    const sections = ['mainMenu', 'analyzeSection', 'forecastsSection', 'cardOfDaySection'];
    sections.forEach(s => {
      document.getElementById(s).classList.toggle('hidden', s !== id);
    });
    clearOutputs();
  }
  function showMainMenu() {
    showSection('mainMenu');
  }
  function clearOutputs() {
    document.getElementById('output').textContent = '';
    document.getElementById('forecastOutput').textContent = '';
    document.getElementById('cardOfDayOutput').textContent = '';
  }

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞—Ç—ã –î–î.–ú–ú.–ì–ì–ì–ì
  function validateDate(dateStr) {
    const re = /^(\d{2})\.(\d{2})\.(\d{4})$/;
    if (!re.test(dateStr)) return false;
    const [, d, m, y] = dateStr.match(re);
    const date = new Date(`${y}-${m}-${d}`);
    return date && (date.getDate() == +d) && (date.getMonth()+1 == +m) && (date.getFullYear() == +y);
  }

  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–Ω–æ–ø–æ–∫ –º–µ–Ω—é
  document.getElementById('btnAnalyze').onclick = () => showSection('analyzeSection');
  document.getElementById('btnForecasts').onclick = () => showSection('forecastsSection');
  document.getElementById('btnCardOfDay').onclick = () => showSection('cardOfDaySection');

  // –ö–Ω–æ–ø–∫–∏ –Ω–∞–∑–∞–¥
  document.getElementById('backFromAnalyze').onclick = showMainMenu;
  document.getElementById('backFromForecasts').onclick = showMainMenu;
  document.getElementById('backFromCardOfDay').onclick = showMainMenu;

  // –ê–Ω–∞–ª–∏–∑ –ª–∏—á–Ω–æ—Å—Ç–∏ - –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä
  document.getElementById('startAnalyze').onclick = () => {
    const date = document.getElementById('birthdateInput').value.trim();
    const out = document.getElementById('output');
    out.textContent = '';
    if (!validateDate(date)) {
      out.textContent = '–û—à–∏–±–∫–∞: –Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –î–î.–ú–ú.–ì–ì–ì–ì';
      return;
    }
    // –ó–∞–≥–ª—É—à–∫–∞ –∞–Ω–∞–ª–∏–∑–∞ ‚Äî –º–æ–∂–Ω–æ —Ä–∞–∑–≤–∏—Ç—å
    out.textContent = `–ê–Ω–∞–ª–∏–∑ –¥–ª—è –¥–∞—Ç—ã ${date}:\n\n- –í—ã —á–µ–ª–æ–≤–µ–∫ —Å –±–æ–ª—å—à–∏–º –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª–æ–º.\n- –í–∞–∂–Ω–æ —Å–ª—É—à–∞—Ç—å —Å–µ–±—è –∏ –æ–∫—Ä—É–∂–∞—é—â–∏—Ö.\n- –ù–∞—Å—Ç—É–ø–∞–µ—Ç –ø–µ—Ä–∏–æ–¥ –ø–µ—Ä–µ–º–µ–Ω, –±—É–¥—å –≥–æ—Ç–æ–≤.`;
  };

  // –ü—Ä–æ–≥–Ω–æ–∑—ã
  document.getElementById('startForecasts').onclick = () => {
    const date = document.getElementById('forecastBirthdate').value.trim();
    const output = document.getElementById('forecastOutput');
    output.textContent = '';
    if (!validateDate(date)) {
      output.textContent = '–û—à–∏–±–∫–∞: –Ω–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –î–î.–ú–ú.–ì–ì–ì–ì';
      return;
    }
    output.textContent = `–ü—Ä–æ–≥–Ω–æ–∑ –¥–ª—è –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è ${date}:\n\n- –°–µ–≥–æ–¥–Ω—è —É–¥–∞—á–Ω—ã–π –¥–µ–Ω—å –¥–ª—è —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞.\n- –í–æ–∑–º–æ–∂–Ω—ã –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –≤—Å—Ç—Ä–µ—á–∏.\n- –ë—É–¥—å—Ç–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω—ã –∫ –∑–¥–æ—Ä–æ–≤—å—é.`;
  };

  // –ö–∞—Ä—Ç–∞ –¥–Ω—è
  document.getElementById('showCardOfDay').onclick = () => {
    const output = document.getElementById('cardOfDayOutput');
    const cards = [
      "–¢—É–∑ –ñ–µ–∑–ª–æ–≤ ‚Äî –Ω–∞—á–∞–ª–æ –Ω–æ–≤–æ–≥–æ –ø—É—Ç–∏",
      "–î–≤–æ–π–∫–∞ –ö—É–±–∫–æ–≤ ‚Äî –≥–∞—Ä–º–æ–Ω–∏—è –∏ —Å–æ—é–∑",
      "–¢—Ä–æ–π–∫–∞ –ú–µ—á–µ–π ‚Äî –∏—Å–ø—ã—Ç–∞–Ω–∏—è –∏ —É—Ä–æ–∫–∏",
      "–ò–º–ø–µ—Ä–∞—Ç–æ—Ä ‚Äî –≤–ª–∞—Å—Ç—å –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å",
      "–ó–≤–µ–∑–¥–∞ ‚Äî –Ω–∞–¥–µ–∂–¥–∞ –∏ –≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ",
    ];
    const card = cards[Math.floor(Math.random() * cards.length)];
    output.textContent = `–í–∞—à–∞ –∫–∞—Ä—Ç–∞ –¥–Ω—è:\n\n${card}`;
  };

  // –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –º–µ–Ω—é
  showMainMenu();
</script>

</body>
</html>
